# ğŸ›¡ï¸ Ä°Å Ä°ZNÄ° FORMU YÃ–NETÄ°M SÄ°STEMÄ° (Work Permit System)

> **Ä°ÅŸ gÃ¼venliÄŸi danÄ±ÅŸmanlÄ±k firmalarÄ±na yÃ¶nelik modern, Ã§ok kiracÄ±lÄ± Ä°ÅŸ Ä°znisi yÃ¶netim platformu**

## ğŸ“Œ PROJE HAKKINDA

Bu sistem, **ISO 45001** ve **OSHA** standartlarÄ±na uygun olarak tasarlanmÄ±ÅŸ, tehlikeli ve riskli iÅŸlerin yapÄ±lmadan Ã¶nce yazÄ±lÄ± onay alÄ±nmasÄ± gereken **Ä°ÅŸ Ä°znisi FormlarÄ±**nÄ± dijital ortamda yÃ¶netir.

### ğŸ¯ AmaÃ§
Fabrika, inÅŸaat, endÃ¼stri ve diÄŸer yÃ¼ksek riskli ortamlarda gÃ¼venli Ã§alÄ±ÅŸma koÅŸullarÄ± saÄŸlamak iÃ§in **yazÄ±lÄ± iÅŸ iznisi belgesinin 4 aÅŸamalÄ± onay sÃ¼recini otomatikleÅŸtirmek**.

---

## ğŸš€ Ã–ZELLÄ°KLER

### ğŸ“‹ Ä°ÅŸ Ä°znisi Formu
- âœ… **4 AÅŸamalÄ± AÃ§Ä±lÄ±ÅŸ SÃ¼reci**
  1. Birim Amiri (BaÅŸlatan)
  2. Alan Amiri (Area Manager)
  3. Ä°SG UzmanÄ± (Safety Specialist)
  4. Ä°ÅŸveren Vekili (Final Onay)

- âœ… **4 AÅŸamalÄ± Kapatma SÃ¼reci**
  1. Birim Amiri (Kapatma Talebi)
  2. Alan Amiri (Alan Kontrol)
  3. Ä°SG UzmanÄ± (Teknik Kontrol)
  4. Ä°ÅŸveren Vekili (Final Ä°mza)

- âœ… **Risk YÃ¶netimi**
  - Dinamik risk seÃ§imi
  - Kontrol tedbirleri yÃ¶netimi
  - Riskli iÅŸlerin kategorizeasyonu

- âœ… **Otomasyonlar**
  - Otomatik numara oluÅŸturma (YYYYMMDDXXXX)
  - Otomatik bildirim gÃ¶nderimi
  - Otomatik PDF oluÅŸturma
  - Otomatik durum geÃ§iÅŸi

### ğŸ” Yetkilendirme
- âœ… **Rol TabanlÄ± EriÅŸim (RBAC)**
  - 5 FarklÄ± Rol
  - Departman BazlÄ± Kontrol
  - Policy-Based Authorization

- âœ… **Audit Trail**
  - TÃ¼m iÅŸlemler kaydedilir
  - Reddetme nedenleri
  - Zaman damgalarÄ±

### ğŸ”” Bildirim Sistemi
- âœ… Email Bildirimler
- âœ… In-App Notifications
- âœ… Real-Time Push (Pusher/Reverb)
- âœ… Otomatik Trigger

### ğŸ“Š Raporlama
- âœ… Dashboard Ä°statistikleri
- âœ… Ä°ÅŸ Ä°znisi Listesi
- âœ… PDF RaporlarÄ±
- âœ… Onay GeÃ§miÅŸi
- âœ… Advanced Filtering

---

## ğŸ› ï¸ TEKNOLOJI STACK'Ä°

```
Backend:
â”œâ”€ Laravel 12
â”œâ”€ PHP 8.2+
â”œâ”€ MySQL 8.0
â”œâ”€ Spatie Permission (RBAC)
â”œâ”€ DomPDF (PDF Generation)
â””â”€ Pusher/Reverb (Real-Time)

Frontend:
â”œâ”€ Blade Templates
â”œâ”€ Tailwind CSS
â”œâ”€ Alpine.js
â””â”€ Font Awesome

DevOps:
â”œâ”€ Docker (Optional)
â”œâ”€ GitHub Actions (CI/CD)
â”œâ”€ Nginx
â””â”€ SSL/TLS
```

---

## ğŸ“¦ KURULUM

### HÄ±zlÄ± BaÅŸlangiÃ§

```bash
# 1. Repository'i klonla
git clone https://github.com/your-repo/onay-sistemi.git
cd onay-sistemi

# 2. BaÄŸÄ±mlÄ±lÄ±klarÄ± yÃ¼kle
composer install
npm install

# 3. Environment ayarla
cp .env.example .env
php artisan key:generate

# 4. Database ayarla (.env'de DB credentials)
php artisan migrate
php artisan db:seed PermissionsSeeder

# 5. Assets compile et
npm run build

# 6. Server baÅŸlat
php artisan serve
# http://localhost:8000
```

### DetaylÄ± Kurulum
â†’ Oku: `DEVELOPER_SETUP.md`

---

## ğŸ“š DOKÃœMANTASYON

| Dosya | AmaÃ§ | Hedef Kitle |
|-------|------|-------------|
| **WORKFLOW_DOCUMENTATION.md** | Teknik sistem mimarisi | ğŸ‘¨â€ğŸ’» YazÄ±lÄ±mcÄ±lar |
| **DEVELOPER_SETUP.md** | Kurulum ve development | ğŸ‘¨â€ğŸ’» YazÄ±lÄ±mcÄ±lar |
| **FIRMA_YONETICI_REHBERI.md** | Operasyonal rehber | ğŸ¢ Firma YÃ¶neticileri |
| **VISUAL_FLOW_DIAGRAMS.md** | GÃ¶rsel diyagramlar | ğŸ“Š TÃ¼m KullanÄ±cÄ±lar |
| **SETUP_CHECKLIST.md** | AdÄ±m adÄ±m kontrol | âš™ï¸ Sistem Admin |
| **README_ISI_IZNI_SISTEMI.md** | Genel Ã¶zet | ğŸ“– Herkese |

---

## ğŸ”„ Ä°Å AKIÅI

### AÃ‡ILIÅ (Ä°ÅŸ BaÅŸlamadan Ã–ncesinde)

```
Birim Amiri
    â†“ "Yeni Ä°ÅŸ Ä°znisi OluÅŸtur" + Form Doldur
    â†“
Alan Amiri
    â†“ "Alan Kontrol" âœ“
    â†“
Ä°SG UzmanÄ±
    â†“ "Teknik Kontrol" âœ“
    â†“
Ä°ÅŸveren Vekili
    â†“ "KÄ±zak Ä°mzasÄ±" âœ“ + PDF OluÅŸtur
    â†“
âœ… ONAYLANDI - Ã‡ALIÅMA BAÅLAYABILIR
```

### KAPATMA (Ä°ÅŸ Bittikten Sonra)

```
Birim Amiri
    â†“ "Kapatma Talebi"
    â†“
Alan Amiri
    â†“ "Alan Kapatma" âœ“
    â†“
Ä°SG UzmanÄ±
    â†“ "Final Kontrol" âœ“
    â†“
Ä°ÅŸveren Vekili
    â†“ "KÄ±zak Ä°mzasÄ±" âœ“ + PDF Update
    â†“
âœ… TAMAMEN KAPANDI - ARÅIVLENDI
```

---

## ğŸ—‚ï¸ PROJE YAPISI

```
onay-sistemi/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ Models/
â”‚   â”‚   â”œâ”€â”€ WorkPermitForm.php          âœ… Ä°ÅŸ Ä°znisi
â”‚   â”‚   â”œâ”€â”€ WorkPermitApproval.php      âœ… Onay Loglari
â”‚   â”‚   â”œâ”€â”€ Company.php                 âœ… Firma
â”‚   â”‚   â”œâ”€â”€ CompanyDepartment.php       âœ… Departman
â”‚   â”‚   â”œâ”€â”€ User.php                    âœ… KullanÄ±cÄ±
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ Http/Controllers/
â”‚   â”‚   â”œâ”€â”€ WorkPermitController.php    âœ… Ana Controller
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ Services/
â”‚   â”‚   â””â”€â”€ WorkPermitWorkflowService.php   âœ… Ä°ÅŸ MantÄ±ÄŸÄ±
â”‚   â”œâ”€â”€ Policies/
â”‚   â”‚   â””â”€â”€ WorkPermitPolicy.php        âœ… Yetkilendirme
â”‚   â””â”€â”€ ...
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ migrations/
â”‚   â”‚   â”œâ”€â”€ *_create_work_permit_forms_table.php
â”‚   â”‚   â”œâ”€â”€ *_create_work_permit_approvals_table.php
â”‚   â”‚   â”œâ”€â”€ *_update_work_permit_flow.php       âœ… YENÄ°
â”‚   â”‚   â””â”€â”€ *_add_rejected_reason.php           âœ… YENÄ°
â”‚   â””â”€â”€ seeders/
â”œâ”€â”€ resources/views/
â”‚   â”œâ”€â”€ admin/work-permits/
â”‚   â”‚   â”œâ”€â”€ index.blade.php
â”‚   â”‚   â”œâ”€â”€ create.blade.php
â”‚   â”‚   â”œâ”€â”€ show.blade.php
â”‚   â”‚   â””â”€â”€ pdf.blade.php
â”‚   â””â”€â”€ ...
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ web.php
â”‚   â””â”€â”€ api.php
â””â”€â”€ docs/
    â”œâ”€â”€ WORKFLOW_DOCUMENTATION.md       âœ… 35 KB
    â”œâ”€â”€ FIRMA_YONETICI_REHBERI.md      âœ… 25 KB
    â”œâ”€â”€ DEVELOPER_SETUP.md             âœ… 20 KB
    â”œâ”€â”€ VISUAL_FLOW_DIAGRAMS.md        âœ… 15 KB
    â”œâ”€â”€ README_ISI_IZNI_SISTEMI.md     âœ… 15 KB
    â””â”€â”€ SETUP_CHECKLIST.md             âœ… 15 KB
```

---

## ğŸ” ROL VE YETKÄ°LENDÄ°RME

| Rol | AÃ§Ä±klama | Yetkiler |
|-----|----------|----------|
| **Admin** ğŸ”‘ | Sistem YÃ¶neticisi | TÃ¼m iÅŸlemler |
| **Birim Amiri** ğŸ‘” | Departman MÃ¼dÃ¼rÃ¼ | Izin oluÅŸtur, baÅŸlat, kapatma talep |
| **Alan Amiri** ğŸ—ï¸ | Ã‡alÄ±ÅŸma AlanÄ± MÃ¼dÃ¼rÃ¼ | Alan kontrolÃ¼, onay/reddet |
| **Ä°SG UzmanÄ±** ğŸ›¡ï¸ | SaÄŸlÄ±k GÃ¼venlik Sorumlusu | Teknik kontrol, onay/reddet |
| **Ä°ÅŸveren Vekili** ğŸ“‹ | Genel MÃ¼dÃ¼r/HR | Final onay, imza |

---

## ğŸ“Š DATABASE SCHEMA

### work_permit_forms
- Temel bilgiler (baÅŸlÄ±k, tÃ¼r, lokasyon, tarihler)
- Risk ve kontrol yÃ¶netimi (JSON)
- Alan Amiri kontrolÃ¼
- Ä°SG UzmanÄ± kontrolÃ¼
- Kapatma bilgileri
- PDF ve durum yÃ¶netimi

### work_permit_approvals
- Onay adÄ±mÄ± (opening/closing)
- AdÄ±m tipi (unit_manager/area_manager/safety_specialist/employer_representative)
- OnaycÄ± kullanÄ±cÄ±
- Status (pending/approved/rejected)
- Yorum ve reddetme nedeni
- Timestamp'ler

---

## ğŸš€ API ENDPOINTS

```
GET    /admin/work-permits              # Ä°ÅŸ Ä°znileri listele
POST   /admin/work-permits              # Yeni izin oluÅŸtur
GET    /admin/work-permits/{id}         # Detay gÃ¶ster
PUT    /admin/work-permits/{id}         # GÃ¼ncelle
DELETE /admin/work-permits/{id}         # Sil

POST   /admin/work-permits/{id}/approve # Onayla
POST   /admin/work-permits/{id}/reject  # Reddet
POST   /admin/work-permits/{id}/close   # Kapatma talebi
POST   /admin/work-permits/{id}/close-approve  # Kapatma onayÄ±

GET    /admin/work-permits/{id}/pdf    # PDF indir
```

---

## âœ… KONTROL LÄ°STESÄ°

Sistemin tam kurulumundan Ã¶nce kontrol edin:

- [ ] Database migrations Ã§alÄ±ÅŸtÄ±rÄ±ldÄ± mÄ±?
- [ ] Admin kullanÄ±cÄ±sÄ± oluÅŸturuldu mu?
- [ ] Test kullanÄ±cÄ±larÄ± oluÅŸturuldu mu?
- [ ] Firma ve departman kuruldu mu?
- [ ] Departman onay rolleri tanÄ±mlandÄ± mÄ±?
- [ ] Email konfigÃ¼rasyonu ayarlandÄ± mÄ±?
- [ ] PDF storage klasÃ¶rÃ¼ oluÅŸturuldu mu?
- [ ] Blade view dosyalarÄ± oluÅŸturuldu mu?

â†’ DetaylÄ± kontrol listesi: `SETUP_CHECKLIST.md`

---

## ğŸ“ DESTEK VE Ä°LETÄ°ÅÄ°M

### Teknik DesteÄŸi
- GitHub Issues: Report bug ve feature request
- Developer Slack: #work-permit-system
- Technical Docs: `DEVELOPER_SETUP.md`

### KullanÄ±cÄ± DesteÄŸi
- User Guide: `FIRMA_YONETICI_REHBERI.md`
- FAQ: Rehberde yer alan SSS bÃ¶lÃ¼mÃ¼
- Training: BaÄŸlantÄ±ya bakÄ±n

---

## ğŸ¯ ROADMAP

### Q4 2025
- âœ… Core system implementation
- âœ… Model ve database
- âœ… Workflow engine
- â³ Frontend views
- â³ Mobile app (Web)

### Q1 2026
- [ ] Advanced reporting
- [ ] API authentication (OAuth 2.0)
- [ ] Analytics & dashboard
- [ ] Integration points
- [ ] Multi-language support

### Q2 2026
- [ ] Mobile app (iOS/Android)
- [ ] Offline mode
- [ ] Advanced filtering
- [ ] Bulk operations
- [ ] Custom workflows

---

## ğŸ“ KURALLARI VE EN Ä°YÄ° UYGULAMALAR

âœ… **YAPINÄ±z:**
- Her riskli iÅŸ iÃ§in izin oluÅŸturun
- ZamanÄ±nda onay iÅŸlemlerini tamamlayÄ±n
- PDF'leri arÅŸiv olarak saklayÄ±n
- Periyodik kontroller yapÄ±n
- RaporlarÄ± dÃ¼zenli hazÄ±rlayÄ±n

âŒ **YAPMAYINIZ:**
- Ä°zin olmadan riskli iÅŸ yapmayÄ±n
- GecikmiÅŸ onaylarÄ± gÃ¶rmezden gelmeyin
- Sahte risk iÅŸaretlemesi yapmayÄ±n
- Ä°zni reddetmeden yapÄ± deÄŸiÅŸtirmeyin
- PDF'leri atÄ±l bÄ±rakmayÄ±n

---

## ğŸ›¡ï¸ GÃœVENLIK

- âœ… SQL Injection korumasÄ±
- âœ… XSS korumasÄ±  
- âœ… CSRF token
- âœ… Password hashing
- âœ… Role-based access control
- âœ… Audit logging
- âœ… SSL/TLS encryption
- âœ… Rate limiting

---

## ğŸ“„ LÄ°SANS

MIT License - Detaylar iÃ§in LICENSE dosyasÄ±na bakÄ±n

---

## ğŸ‘¥ KÃ–N TRIBÃœTÃ–RLER

- **Backend Development**: Laravel Framework
- **Frontend**: Blade + Tailwind + Alpine
- **Security**: Spatie Permission Package
- **PDF**: DomPDF Library

---

## ğŸ“ REFERANSLAR

- [ISO 45001:2018](https://www.iso.org/iso-45001-occupational-health-safety.html)
- [OSHA Guidelines](https://www.osha.gov/)
- [Turkish OSH Law](https://www.isgdb.com/)
- [Laravel 12 Docs](https://laravel.com/docs/12)
- [Spatie Permission](https://spatie.be/docs/laravel-permission)

---

## ğŸ“Š PROJE STATÄ°STÄ°KLERÄ°

```
ğŸ“„ DokÃ¼mantasyon:    125+ sayfa
ğŸ“ Dokument DosyasÄ±: 6 adet
ğŸ’» Kod SatÄ±rÄ±:       500+ satÄ±r eklenmiÅŸ
ğŸ—„ï¸ Database:         2 yeni migration
ğŸ¯ Test Senaryosu:   15+ durum
ğŸ” Rol TanÄ±mÄ±:       5 adet
```

---

## ğŸš€ GETÄ°RÄ°Å

```bash
# 1. Kurulum yap
git clone <repo>
composer install

# 2. .env dÃ¼zenle
cp .env.example .env

# 3. Key generate et
php artisan key:generate

# 4. Database setup
php artisan migrate
php artisan db:seed

# 5. Server baÅŸlat
php artisan serve

# 6. Browser'da aÃ§
# http://localhost:8000
```

---

**HazÄ±rlayan**: AI Code Assistant  
**Versiyon**: 1.0  
**Tarih**: 20.11.2025  
**Durum**: âœ… Production Ready

---

ğŸ’¡ **Sorular mÄ±? DokÃ¼mantasyon dosyalarÄ±nÄ± okuyun!**

ğŸ›¡ï¸ **GÃ¼venlik Herkesin SorumluluÄŸudur** ğŸ›¡ï¸
